@use "tailwindcss";
@import '@ngxpert/hot-toast/src/styles/styles.scss';

/* =============================================
   GROCY MEAL PLANNING — DESIGN SYSTEM
   Subtle, muted color palette for light & dark
   ============================================= */

@layer theme {
  :root {
    --width-1-7: 14.28571428571429%;
  }
}

/* ── Base ── */
@layer base {
  * {
    border-color: #e2e8f0;
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.15s ease, box-shadow 0.2s ease, opacity 0.2s ease;
  }

  html { color-scheme: light; }

  body {
    background-color: #fafaf9;
    color: #1c1917;
  }

  *:focus {
    outline: 2px solid #818cf8;
    outline-offset: 2px;
  }

  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #a8a29e; }
}

/* =============================================
   LIGHT MODE
   ============================================= */
.light {
  color-scheme: light;

  body {
    background-color: #fafaf9 !important;
    color: #1c1917 !important;
  }

  .flex.flex-col.md\:flex-row.w-screen.h-screen,
  .flex.flex-row.w-screen.h-screen {
    background-color: #fafaf9 !important;
  }

  .recipes {
    background-color: #ffffff !important;
    border-color: #e7e5e4 !important;
  }

  .scheduler, .planning, .weeks {
    background-color: #f5f5f4 !important;
  }

  /* ── Week card ── */
  .week-card {
    background-color: transparent !important;
  }

  .weeknumber-header-desktop {
    background-color: #ffffff !important;
    color: #44403c !important;
  }

  @media (min-width: 768px) {
    .week-card {
      background-color: #ffffff !important;
      border: 1px solid #e7e5e4 !important;
      border-radius: 0.75rem !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.03) !important;
    }
    .weeknumber-header-desktop {
      border-bottom: 1px solid #e7e5e4 !important;
    }
  }

  /* ── Day columns ── */
  .day-normal  { background-color: #ffffff !important; }
  .day-today   { background-color: #eef2ff !important; }
  .day-weekend { background-color: #faf5ff !important; }

  .day:hover { background-color: #f5f5f4 !important; }

  /* ── Day headers ── */
  .days-header { color: #44403c !important; }
  .header-today {
    color: #6366f1 !important;
    font-weight: 600 !important;
  }
  .header-weekend {
    color: #a78bfa !important;
    font-weight: 500 !important;
  }

  .meals { background-color: transparent !important; }

  /* ── Cards ── */
  .card-surface { background-color: #ffffff !important; }
  .recipe {
    background-color: #ffffff !important;
    color: #1c1917 !important;
  }

  /* ── Add recipe button ── */
  .add-recipe-btn {
    background-color: #eef2ff !important;
    color: #6366f1 !important;
  }
  .add-recipe-btn:hover {
    background-color: #6366f1 !important;
    color: #ffffff !important;
  }

  /* ── Shadows ── */
  .shadow-lg { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06) !important; }
  .shadow-md { box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05) !important; }
  .shadow-sm { box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important; }

  /* ── Status badges ── */
  .bg-blue-50  { background-color: #eef2ff !important; color: #4f46e5 !important; }
  .bg-yellow-50 { background-color: #fefce8 !important; color: #a16207 !important; }

  /* ── Utility overrides ── */
  .bg-gray-100 { background-color: #f5f5f4 !important; color: #1c1917 !important; }
  .bg-white    { background-color: #ffffff !important; color: #1c1917 !important; }
  .bg-stone-50 { background-color: #fafaf9 !important; color: #1c1917 !important; }

  /* ── Config page ── */
  .bg-slate-200 { background-color: #f5f5f4 !important; }
  .card {
    background-color: #ffffff !important;
    color: #1c1917 !important;
    border-color: #e7e5e4 !important;
  }
  .bg-teal-100 {
    background-color: #f0fdfa !important;
    color: #134e4a !important;
    border-color: #99f6e4 !important;
  }
}

/* ── Week card ── */
.week-card {
  display: flex;
  flex-direction: column;
}

.weeknumber-header-desktop {
  padding: 0.75rem 1.25rem;
  font-size: 1.125rem;
  font-weight: 600;
  white-space: nowrap;
  width: 100%;
}

@media (min-width: 768px) {
  .week-card {
    overflow: hidden;
  }
}

/* ── Action pill buttons (card overlay) ── */
.action-pill {
  background-color: rgba(255, 255, 255, 0.85) !important;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  border-radius: 9999px;
  width: 1.75rem;
  height: 1.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

/* ── Controls ── */
.control-btn {
  background-color: #f5f5f4 !important;
  color: #57534e !important;
  border: 1px solid #d6d3d1 !important;
  border-radius: 0.375rem;
  padding: 0.5rem;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: all 0.15s ease !important;
}
.control-btn:hover {
  background-color: #e7e5e4 !important;
  color: #1c1917 !important;
}

.control-btn-primary {
  background-color: #eef2ff !important;
  color: #6366f1 !important;
  border: 1px solid #c7d2fe !important;
  border-radius: 0.375rem;
  padding: 0.5rem;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: all 0.15s ease !important;
}
.control-btn-primary:hover {
  background-color: #6366f1 !important;
  color: #ffffff !important;
  border-color: #6366f1 !important;
}

.control-btn-danger {
  background-color: #f5f5f4 !important;
  color: #a8a29e !important;
  border: 1px solid #d6d3d1 !important;
  border-radius: 0.375rem;
  padding: 0.5rem;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: all 0.15s ease !important;
}
.control-btn-danger:hover {
  background-color: #fecdd3 !important;
  color: #e11d48 !important;
  border-color: #fecdd3 !important;
}

.control-select {
  background-color: #f5f5f4 !important;
  color: #57534e !important;
  border: 1px solid #d6d3d1 !important;
  border-radius: 0.375rem;
  padding: 0.25rem 0.5rem;
}

/* ── Input focus ── */
input[type="text"],
input[type="email"],
input[type="password"],
select,
textarea {
  &:focus {
    border-color: #818cf8 !important;
    box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.1) !important;
  }
  &::placeholder { color: #a8a29e !important; }
}

/* ── Einheitliche Höhe Controls ── */
.scheduler-controls button,
.control-select,
app-theme-toggle button {
  height: 2.5rem !important;
  min-height: 2.5rem !important;
  display: flex !important;
  align-items: center !important;
}

@media (max-width: 767px) {
  .scheduler-controls button,
  .control-select,
  app-theme-toggle button {
    height: 2.25rem !important;
    min-height: 2.25rem !important;
  }
}

/* ── Theme Toggle ── */
app-theme-toggle button {
  background-color: #f5f5f4 !important;
  color: #57534e !important;
  border: 1px solid #d6d3d1 !important;
}
app-theme-toggle button:hover {
  background-color: #e7e5e4 !important;
  color: #1c1917 !important;
}
app-theme-toggle .dropdown-menu {
  background-color: #ffffff !important;
  border-color: #e7e5e4 !important;
}

/* =============================================
   DARK MODE
   ============================================= */
.dark {
  color-scheme: dark;

  * { border-color: #292524 !important; }

  body {
    background-color: #0c0a09 !important;
    color: #e7e5e4 !important;
  }

  .flex.flex-col.md\:flex-row.w-screen.h-screen,
  .flex.flex-row.w-screen.h-screen {
    background-color: #0c0a09 !important;
  }

  .recipes {
    background-color: #1c1917 !important;
    border-color: #292524 !important;
  }

  .scheduler, .planning, .weeks {
    background-color: #0c0a09 !important;
  }

  /* ── Week card ── */
  .week-card {
    background-color: transparent !important;
  }

  .weeknumber-header-desktop {
    background-color: #1c1917 !important;
    color: #d6d3d1 !important;
  }

  @media (min-width: 768px) {
    .week-card {
      background-color: #1c1917 !important;
      border: 1px solid #292524 !important;
      border-radius: 0.75rem !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2) !important;
    }
    .weeknumber-header-desktop {
      border-bottom: 1px solid #292524 !important;
    }
  }

  /* ── Day columns ── */
  .day-normal  { background-color: #1c1917 !important; color: #e7e5e4 !important; }
  .day-today   { background-color: #0c1425 !important; color: #bfdbfe !important; }
  .day-weekend { background-color: #1a1207 !important; color: #fde68a !important; }

  .day:hover {
    background-color: #292524 !important;
    color: #e7e5e4 !important;
  }

  /* ── Day headers ── */
  .days-header { color: #a8a29e !important; }
  .header-today {
    color: #60a5fa !important;
    font-weight: 600 !important;
  }
  .header-weekend {
    color: #fbbf24 !important;
    font-weight: 500 !important;
  }

  .meals { background-color: transparent !important; }

  /* ── Cards ── */
  .card-surface { background-color: #1c1917 !important; }
  .recipe {
    background-color: #1c1917 !important;
    color: #e7e5e4 !important;
  }

  .action-pill {
    background-color: rgba(28, 25, 23, 0.85) !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  /* ── Add recipe button ── */
  .add-recipe-btn {
    background-color: #1e3a5f !important;
    color: #93c5fd !important;
  }
  .add-recipe-btn:hover {
    background-color: #3b82f6 !important;
    color: #ffffff !important;
  }

  /* ── Controls ── */
  .control-btn {
    background-color: #292524 !important;
    color: #a8a29e !important;
    border-color: #3f3f46 !important;
  }
  .control-btn:hover {
    background-color: #3f3f46 !important;
    color: #e7e5e4 !important;
  }

  .control-btn-primary {
    background-color: #1e3a5f !important;
    color: #93c5fd !important;
    border-color: #2563eb !important;
  }
  .control-btn-primary:hover {
    background-color: #3b82f6 !important;
    color: #ffffff !important;
    border-color: #3b82f6 !important;
  }

  .control-btn-danger {
    background-color: #292524 !important;
    color: #78716c !important;
    border-color: #3f3f46 !important;
  }
  .control-btn-danger:hover {
    background-color: #4c0519 !important;
    color: #fda4af !important;
    border-color: #4c0519 !important;
  }

  .control-select {
    background-color: #292524 !important;
    color: #a8a29e !important;
    border-color: #3f3f46 !important;
  }

  /* ── Inputs ── */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  select,
  textarea {
    background-color: #1c1917 !important;
    color: #e7e5e4 !important;
    border-color: #3f3f46 !important;

    &:focus {
      border-color: #818cf8 !important;
      box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.15) !important;
      background-color: #292524 !important;
    }
    &::placeholder { color: #78716c !important; }
  }

  /* ── Theme Toggle ── */
  app-theme-toggle button {
    background-color: #292524 !important;
    color: #a8a29e !important;
    border-color: #3f3f46 !important;
  }
  app-theme-toggle button:hover {
    background-color: #3f3f46 !important;
    color: #e7e5e4 !important;
  }
  app-theme-toggle .dropdown-menu {
    background-color: #292524 !important;
    border-color: #3f3f46 !important;
  }
  app-theme-toggle .dropdown-menu button {
    color: #a8a29e !important;
  }
  app-theme-toggle .dropdown-menu button:hover,
  app-theme-toggle .dropdown-menu button.selected {
    background-color: #3f3f46 !important;
    color: #e7e5e4 !important;
  }

  /* ── Config page ── */
  .bg-slate-200 { background-color: #0c0a09 !important; }
  .card {
    background-color: #1c1917 !important;
    color: #e7e5e4 !important;
    border-color: #292524 !important;
  }
  .bg-teal-100 {
    background-color: #042f2e !important;
    color: #5eead4 !important;
    border-color: #14b8a6 !important;
  }

  /* ── Utility overrides ── */
  .bg-white, [class*="bg-white"] {
    background-color: #1c1917 !important;
    color: #e7e5e4 !important;
  }
  .bg-gray-100, [class*="bg-gray-100"] {
    background-color: #292524 !important;
    color: #d6d3d1 !important;
  }
  .bg-stone-50, [class*="bg-stone-50"] {
    background-color: #292524 !important;
    color: #d6d3d1 !important;
  }
  .max-w-sm {
    background-color: #1c1917 !important;
    color: #e7e5e4 !important;
  }

  /* ── Status badges ── */
  .bg-blue-50  { background-color: #172554 !important; color: #93c5fd !important; }
  .bg-yellow-50 { background-color: #451a03 !important; color: #fde68a !important; }

  /* ── Shadows ── */
  .shadow-lg { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important; }
  .shadow-md { box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25) !important; }
  .shadow-sm { box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important; }

  /* ── Scrollbars ── */
  ::-webkit-scrollbar-track { background: #1c1917; }
  ::-webkit-scrollbar-thumb { background: #3f3f46; }
  ::-webkit-scrollbar-thumb:hover { background: #52525b; }

  /* ── Dropzone ── */
  .dropzone:hover {
    background-color: #292524 !important;
  }
}

/* =============================================
   GLOBAL / SHARED
   ============================================= */
html, body {
  height: 100%;
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
}

/* =============================================
   iOS SAFARI SAFE AREA SUPPORT
   For devices with notch / Dynamic Island / home indicator
   ============================================= */

/* Main app shell: only horizontal safe areas on root to preserve scroll chain */
.flex.flex-col.md\:flex-row.w-screen.h-screen {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Top safe area on the scheduler controls header */
.scheduler > .info {
  padding-top: env(safe-area-inset-top);
}

/* Bottom safe area inside the scrollable weeks container */
.weeks {
  padding-bottom: env(safe-area-inset-bottom);
  -webkit-overflow-scrolling: touch;
}

/* Hot toast notifications — offset from safe area top */
.hot-toast-container {
  top: env(safe-area-inset-top) !important;
}

/* Recipe picker bottom sheet — bottom safe area for home indicator */
.recipe-picker-bottom-sheet .mat-bottom-sheet-container,
.recipe-picker-bottom-sheet .mat-mdc-bottom-sheet-container {
  padding-bottom: env(safe-area-inset-bottom) !important;
}

/* Config page — safe area padding */
.flex.flex-col.justify-center.items-center.min-h-screen.w-screen {
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* Fix 100vh on iOS Safari where it includes the URL bar */
@supports (-webkit-touch-callout: none) {
  html, body {
    height: -webkit-fill-available;
  }
  .flex.flex-col.md\:flex-row.w-screen.h-screen {
    height: -webkit-fill-available;
  }
  .flex.flex-col.justify-center.items-center.min-h-screen.w-screen {
    min-height: -webkit-fill-available;
  }
}

/* ── Release Notes Modal ── */
.release-notes-dialog .mat-mdc-dialog-container {
  padding: 0 !important;
  border-radius: 1rem !important;
  overflow: hidden;
}
.release-notes-dialog .mat-mdc-dialog-surface {
  border-radius: 1rem !important;
}

/* ── Recipe Picker Bottom Sheet ── */
.recipe-picker-bottom-sheet {
  max-height: 80vh !important;
}
.recipe-picker-bottom-sheet .mat-bottom-sheet-container {
  border-radius: 1rem 1rem 0 0 !important;
  padding: 0 !important;
  max-width: 100vw !important;
}

.dark .recipe-picker-bottom-sheet .mat-bottom-sheet-container,
.dark .recipe-picker-bottom-sheet .mat-mdc-bottom-sheet-container {
  background-color: #1c1917 !important;
  color: #e7e5e4 !important;
}
.dark .recipe-picker-bottom-sheet input {
  background-color: #292524 !important;
  color: #e7e5e4 !important;
  border-color: #3f3f46 !important;
}
.dark .recipe-picker-bottom-sheet button {
  color: #e7e5e4 !important;
}
.dark .recipe-picker-bottom-sheet button:hover {
  background-color: #292524 !important;
}
.dark .recipe-picker-bottom-sheet .border-b,
.dark .recipe-picker-bottom-sheet .border {
  border-color: #3f3f46 !important;
}

/* ── Hot Toast ── */
.hot-toast-container {
  z-index: 99999 !important;
}

.hot-toast-bar-base {
  background-color: #ffffff !important;
  color: #1c1917 !important;
  border: 1px solid #e7e5e4 !important;
  border-radius: 0.75rem !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
}

.dark .hot-toast-bar-base {
  background-color: #292524 !important;
  color: #e7e5e4 !important;
  border-color: #3f3f46 !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
}

.dark .hot-toast-close-btn {
  filter: invert(1);
}
